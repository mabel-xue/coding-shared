# What's Solution

## nuxtåˆ·æ–°åæœ€æ–°è¯·æ±‚æ•°æ®ä¸¢å¤±ï¼Œä½†è·¯ç”±è·³è½¬å¯åŠ¨æ€è¯·æ±‚ | Nuxt

### ç°è±¡

åœ¨å®˜ç½‘é¡¹ç›®ä¸­ï¼Œä¸€å¼€å§‹å°†æ–°é—»è¯·æ±‚æ”¾åœ¨å„ä¸ªé¡µé¢çš„asyncDataä¸­ï¼›åœ¨é™æ€éƒ¨ç½²åï¼Œå¦‚æœè¯·æ±‚çš„æœ€æ–°æ•°æ®å’Œéƒ¨ç½²æ—¶æ•°æ®ä¸ä¸€è‡´ï¼Œä¼šå¯¼è‡´åœ¨åˆæ¬¡è®¿é—®é¡µé¢æˆ–å†…éƒ¨è·¯ç”±è·³è½¬æ—¶è¯·æ±‚åˆ°æ–°æ•°æ®ï¼Œä½†åœ¨é¡µé¢åˆ·æ–°åï¼Œé¡µé¢æ˜¾ç¤ºä¸ºéƒ¨ç½²æ—¶çš„é™æ€æ•°æ®ï¼Œå¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚

### åŸå› 

asyncDataæ–¹æ³•ä¼šåœ¨æ¸²æŸ“ç»„ä»¶ä¹‹å‰å¼‚æ­¥è·å–æ•°æ®ï¼Œå®ƒå¯ä»¥åœ¨æœåŠ¡ç«¯æˆ–è·¯ç”±æ›´æ–°ä¹‹å‰è¢«è°ƒç”¨ï¼Œæ‰€ä»¥é¡µé¢åˆ·æ–°æ—¶ä¸ä¼šæ‰§è¡Œè¯¥æ–¹æ³•ï¼›

* åœ¨æ‰§è¡Œnuxt generateæ—¶ï¼Œä¼šæ‰§è¡ŒasyncDataé‡Œçš„æ–¹æ³•æ¥é™æ€åŒ–æ‰€æœ‰çš„htmlæ–‡ä»¶ï¼Œè¿™äº›æ•°æ®æ˜¯è¢«generateçš„æ—¶å€™ç”Ÿæˆä¸€ä¸ªscriptåœ¨htmlé‡Œçš„æ¥æ‰§è¡Œçš„ï¼›

### è§£å†³

1. åœ¨storeä¸‹æ–°å»ºindex.jsï¼Œåœ¨```nuxtServerInit```æ–¹æ³•ä¸­è·å–æ–°é—»æ•°æ®å¹¶å­˜å‚¨åœ¨storeä¸­ï¼š
nuxtServerInitæ–¹æ³•ä¼šåœ¨å°†æˆ‘ä»¬ä»æœåŠ¡å™¨è·å–åˆ°çš„æ•°æ®å¡«å……åˆ°çŠ¶æ€æ ‘ (store) ä¸Šã€‚

```js
import NewsService from '~/assets/news-service'

export const state = () => ({
  posts: [],
  total: 0
});

export const mutations = {
  SET_POSTS(state, data) {
    state.posts = data;
  },
  SET_TOTAL(state, data) {
    state.total = data;
  },
};

export const actions = {
  nuxtServerInit({
    commit
  }) {
    return NewsService.getAllNews().then(res => {
      commit('SET_POSTS', res.data.posts)
      commit('SET_TOTAL', res.data.meta.pagination.total)
    })
  }
};
```

2. åœ¨éœ€è¦æ–°é—»æ•°æ®çš„é¡µé¢ä½¿ç”¨storeè·å¾—æ•°æ®

```js
index.vue

async asyncData({ store }) {
  return { news: store.state.posts.length ? store.state.posts.slice(0, 6) : [] }
},

...
```

### å…¶ä»–è§£å†³æ–¹æ³•

nuxt-link å’Œ router-link éƒ½æ˜¯èµ°vue-routerï¼Œè¿™æ ·å°±ä¸ä¼šè¯·æ±‚node serverç«¯ã€‚æŠŠé“¾æ¥æ–¹å¼æ”¹æˆç”¨ ```<a :href="è·¯å¾„">``` å°±å¯ä»¥äº†

ğŸ’¬[å‚è€ƒ](https://www.gd277217.com/nuxt/asyncData/asyncData.html)

ğŸ’¬[å‚è€ƒ](https://zh.nuxtjs.org/guide/vuex-store/#nuxtserverinit-%E6%96%B9%E6%B3%95)


