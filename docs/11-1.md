# Whatâ€™s Improvement

## jsæŠ€å·§ | js/æœ€ä½³å®è·µ

æ ¼å¼åŒ–é‡‘é’±

```js
const ThousandNum = num => num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
const money = ThousandNum(20190214);
// money => "20,190,214"

å–æ•´
ä»£æ›¿æ­£æ•°çš„Math.floor()ï¼Œä»£æ›¿è´Ÿæ•°çš„Math.ceil()
const num1 = ~~ 1.69;
const num2 = 1.69 | 0;
const num3 = 1.69 >> 0;
// num1 num2 num3 => 1 1 1

è¡¥é›¶
const FillZero = (num, len) => num.toString().padStart(len, "0");
const num = FillZero(169, 5);
// num => "00169"

æ—¶é—´æˆ³
const timestamp = +new Date("2019-02-14");
// timestamp => 1550102400000

åˆ¤æ–­æ•°æ®ç±»å‹
å¯åˆ¤æ–­ç±»å‹ï¼šundefinedã€nullã€stringã€numberã€booleanã€arrayã€objectã€symbolã€dateã€regexpã€functionã€asyncfunctionã€argumentsã€setã€mapã€weaksetã€weakmap
function DataType(tgt, type) {
    const dataType = Object.prototype.toString.call(tgt).replace(/\[object /g, "").replace(/\]/g, "").toLowerCase();
    return type ? dataType === type : dataType;
}
DataType("young"); // "string"
DataType(20190214); // "number"
DataType(true); // "boolean"
DataType([], "array"); // true
DataType({}, "array"); // false

æ˜¯å¦ä¸ºç©ºæ•°ç»„
const arr = [];
const flag = Array.isArray(arr) && !arr.length;
// flag => true
æ˜¯å¦ä¸ºç©ºå¯¹è±¡
const obj = {};
const flag = DataType(obj, "object") && !Object.keys(obj).length;
// flag => true

æ»¡è¶³æ¡ä»¶æ—¶æ‰§è¡Œ
const flagA = true; // æ¡ä»¶A
const flagB = false; // æ¡ä»¶B
(flagA || flagB) && Func(); // æ»¡è¶³Aæˆ–Bæ—¶æ‰§è¡Œ
(flagA || !flagB) && Func(); // æ»¡è¶³Aæˆ–ä¸æ»¡è¶³Bæ—¶æ‰§è¡Œ
flagA && flagB && Func(); // åŒæ—¶æ»¡è¶³Aå’ŒBæ—¶æ‰§è¡Œ
flagA && !flagB && Func(); // æ»¡è¶³Aä¸”ä¸æ»¡è¶³Bæ—¶æ‰§è¡Œ

æ•°ç»„ä¸ä¸ºç©ºæ—¶æ‰§è¡Œ
const arr = [0, 1, 2];
arr.length && Func();
å¯¹è±¡ä¸ä¸ºç©ºæ—¶æ‰§è¡Œ
const obj = { a: 0, b: 1, c: 2 };

å‡½æ•°é€€å‡ºä»£æ›¿æ¡ä»¶åˆ†æ”¯é€€å‡º
if (flag) {
    Func();
    return false;
}
// æ¢æˆ
if (flag) {
    return Func();
}

switch/case ä½¿ç”¨åŒºé—´
const age = 26;
switch (true) {
    case isNaN(age):
        console.log("not a number");
        break;
    case (age < 18):
        console.log("under age");
        break;
    case (age >= 18):
        console.log("adult");
        break;
    default:
        console.log("please set your age");
        break;
}

å…‹éš†æ•°ç»„
const _arr = [0, 1, 2];
const arr = [..._arr];
// arr => [0, 1, 2]
åˆå¹¶æ•°ç»„
const arr1 = [0, 1, 2];
const arr2 = [3, 4, 5];
const arr = [...arr1, ...arr2];
// arr => [0, 1, 2, 3, 4, 5];

å»é‡æ•°ç»„
const arr = [...new Set([0, 1, 1, null, null])];
// arr => [0, 1, null]

å¯¹è±¡å˜é‡å±æ€§
const flag = false;
const obj = {
    a: 0,
    b: 1,
    [flag ? "c" : "d"]: 2
};
// obj => { a: 0, b: 1, d: 2 }

æ£€æµ‹éç©ºå‚æ•°
function IsRequired() {
    throw new Error("param is required");
}
function Func(name = IsRequired()) {
    console.log("I Love " + name);
}
Func(); // "param is required"
Func("You"); // "I Love You"

è‡ªé€‚åº”é¡µé¢
> é¡µé¢åŸºäºä¸€å¼ è®¾è®¡å›¾ä½†éœ€åšå¤šæ¬¾æœºå‹è‡ªé€‚åº”ï¼Œå…ƒç´ å°ºå¯¸ä½¿ç”¨remè¿›è¡Œè®¾ç½®
function AutoResponse(width = 750) {
    const target = document.documentElement;
    target.clientWidth >= 600
        ? (target.style.fontSize = "80px")
        : (target.style.fontSize = target.clientWidth / width * 100 + "px");
}

è¿‡æ»¤XSS
function FilterXss(content) {
    let elem = document.createElement("div");
    elem.innerText = content;
    const result = elem.innerHTML;
    elem = null;
    return result;
}

å­˜å–LocalStorage
ååºåˆ—åŒ–å–ï¼Œåºåˆ—åŒ–å­˜
const love = JSON.parse(localStorage.getItem("love"));
localStorage.setItem("love", JSON.stringify("I Love You"));
```

ğŸ’¬[çµæ´»è¿ç”¨JSå¼€å‘æŠ€å·§](https://segmentfault.com/a/1190000020749133)

## JavaScript ç¼–ç¨‹æŠ€å·§ | js/æœ€ä½³å®è·µ

### 1. Array.includes

åŸï¼š

```js
function printAnimals(animal) {
  if (animal === 'dog' || animal === 'cat') {
    console.log(`I have a ${animal}`);
  }
}

console.log(printAnimals('dog')); // I have a dog
```

ä¼˜åŒ–ï¼š

```js
function printAnimals(animal) {
  const animals = ['dog', 'cat', 'hamster', 'turtle']; 

  if (animals.includes(animal)) {
    console.log(`I have a ${animal}`);
  }
}

console.log(printAnimals('hamster')); // I have a hamster
```

### 2. Early exit / Return early

```js
const printAnimalDetails = animal => {
  let result; // declare a variable to store the final value

  // condition 1: check if animal has a value
  if (animal) {

    // condition 2: check if animal has a type property
    if (animal.type) {

      // condition 3: check if animal has a name property
      if (animal.name) {

        // condition 4: check if animal has a gender property
        if (animal.gender) {
          result = `${animal.name} is a ${animal.gender} ${animal.type};`;
        } else {
          result = "No animal gender";
        }
      } else {
        result = "No animal name";
      }
    } else {
      result = "No animal type";
    }
  } else {
    result = "No animal";
  }

  return result;
};

console.log(printAnimalDetails()); // 'No animal'

console.log(printAnimalDetails({ type: "dog", gender: "female" })); // 'No animal name'

console.log(printAnimalDetails({ type: "dog", name: "Lucy" })); // 'No animal gender'

console.log(
  printAnimalDetails({ type: "dog", name: "Lucy", gender: "female" })
); // 'Lucy is a female dog'
```

```js
const printAnimalDetails = ({type, name, gender } = {}) => {
  if(!type) return 'No animal type';
  if(!name) return 'No animal name';
  if(!gender) return 'No animal gender';

// Now in this line of code, we're sure that we have an animal with all //the three properties here.

  return `${name} is a ${gender} ${type}`;
}

console.log(printAnimalDetails()); // 'No animal type'

console.log(printAnimalDetails({ type: dog })); // 'No animal name'

console.log(printAnimalDetails({ type: dog, gender: female })); // 'No animal name'

console.log(printAnimalDetails({ type: dog, name: 'Lucy', gender: 'female' })); // 'Lucy is a female dog'
```

```js
// ä¾‹2
function printVegetablesWithQuantity(vegetable, quantity) {
  const vegetables = ['potato', 'cabbage', 'cauliflower', 'asparagus'];

  // condition 1: vegetable should be present
   if (vegetable) {
     // condition 2: must be one of the item from the list
     if (vegetables.includes(vegetable)) {
       console.log(`I like ${vegetable}`);

       // condition 3: must be large quantity
       if (quantity >= 10) {
         console.log('I have bought a large quantity');
       }
     }
   } else {
     throw new Error('No vegetable from the list!');
   }
 }

 printVegetablesWithQuantity(null); //  No vegetable from the list!
 printVegetablesWithQuantity('cabbage'); // I like cabbage
 printVegetablesWithQuantity('cabbage', 20); 
 // 'I like cabbage`
 // 'I have bought a large quantity'
 ```

```js
// ä¼˜åŒ–
function printVegetablesWithQuantity(vegetable, quantity) {

const vegetables = ['potato', 'cabbage', 'cauliflower', 'asparagus'];

  if (!vegetable) throw new Error('No vegetable from the list!');
  // condition 1: throw error early

  if (!vegetables.includes(vegetable)) return;
  // condition 2: return from the function is the vegetable is not in the list


console.log(`I like ${vegetable}`);

// condition 3: must be a large quantity
if (quantity >= 10) {
    console.log('I have bought a large quantity');
}
}
```

### 3. Object Literal or Map instead of Switch Statement

```js
// 
function printFruits(color) {
  // use switch case to find fruits by color
  switch (color) {
    case 'red':
      return ['apple', 'strawberry'];
    case 'yellow':
      return ['banana', 'pineapple'];
    case 'purple':
      return ['grape', 'plum'];
    default:
      return [];
  }
}

printFruits(null); // []
printFruits('yellow'); // ['banana', 'pineapple']
```

```js
// ä¼˜åŒ–
const fruitColor = {
    red: ['apple', 'strawberry'],
    yellow: ['banana', 'pineapple'],
    purple: ['grape', 'plum']
  };

function printFruits(color) {
  return fruitColor[color] || [];
}
```

```js
// ä¼˜åŒ–2
// use Map to find fruits by color
  const fruitColor = new Map()
    .set('red', ['apple', 'strawberry'])
    .set('yellow', ['banana', 'pineapple'])
    .set('purple', ['grape', 'plum']);

function printFruits(color) {
  return fruitColor.get(color) || [];
}
```

### 4. Default Parameters and Destructuring

```js
// é»˜è®¤å€¼ç”¨ä¾‹
function printVegetablesWithQuantity(vegetable, quantity = 1) {
// if quantity has no value, assign 1

  if (!vegetable) return;
  console.log(`We have ${quantity} ${vegetable}!`);
}

//results
printVegetablesWithQuantity('cabbage'); // We have 1 cabbage!
printVegetablesWithQuantity('potato', 2); // We have 2 potato!
```

```js
 function printVegetableName(vegetable) {
    if (vegetable && vegetable.name) {
     console.log (vegetable.name);
   } else {
    console.log('unknown');
   }
 }

 printVegetableName(undefined); // unknown
 printVegetableName({}); // unknown
 printVegetableName({ name: 'cabbage', quantity: 2 }); // cabbage
```

```js
// ä¼˜åŒ–

// destructing - get name property only
// assign default empty object {}

function printVegetableName({name} = {}) {
  console.log (name || 'unknown');
}

printVegetableName(undefined); // unknown
printVegetableName({ }); // unknown
printVegetableName({ name: 'cabbage', quantity: 2 }); // cabbage
```

### 5. Match all/partial criteria using Array.every & Array.some

```js
const fruits = [
    { name: 'apple', color: 'red' },
    { name: 'banana', color: 'yellow' },
    { name: 'grape', color: 'purple' }
  ];

function test() {
  let isAllRed = true;

  // condition: all fruits must be red
  for (let f of fruits) {
    if (!isAllRed) break;
    isAllRed = (f.color == 'red');
  }

  console.log(isAllRed); // false
}
```

```js
// ä¼˜åŒ–
const fruits = [
    { name: 'apple', color: 'red' },
    { name: 'banana', color: 'yellow' },
    { name: 'grape', color: 'purple' }
  ];

function test() {
  // condition: short way, all fruits must be red
  const isAllRed = fruits.every(f => f.color == 'red');

  console.log(isAllRed); // false
}
```

### 6. Use Optional Chaining and Nullish Coalescing

```js
const car = {
    model: 'Fiesta',
    manufacturer: {
    name: 'Ford',
    address: {
      street: 'Some Street Name',
      number: '5555',
      state: 'USA'
      }
    }
  } 

  // to get the car model
  const model = car && car.model || 'default model';

  // to get the manufacturer street
  const street = car && car.manufacturer && car.manufacturer.address && 
  car.manufacturer.address.street || 'default street';

  // request an un-existing property
  const phoneNumber = car && car.manufacturer && car.manufacturer.address 
  && car.manufacturer.phoneNumber;

  console.log(model) // 'Fiesta'
  console.log(street) // 'Some Street Name'
  console.log(phoneNumber) // undefined
```

```js
// ä¼˜åŒ–
// æ³¨æ„ï¼šè¯¥æ–¹æ¡ˆç›®å‰æ­£å¤„äº TC39 stage 3 é˜¶æ®µï¼Œå°†è¦æ­£å¼ç”Ÿæ•ˆ

// to get the car model
 const model = car?.model ?? 'default model';

 // to get the manufacturer street
 const street = car?.manufacturer?.address?.street ?? 'default street';

 // to check if the car manufacturer is from the USA
 const isManufacturerFromUSA = () => {
   if(car?.manufacturer?.address?.state === 'USA') {
     console.log('true');
   }
 }
```

ğŸ’¬[Tips to write better Conditionals in JavaScript](https://dev.to/hellomeghna/tips-to-write-better-conditionals-in-javascript-2189) (åŸæ–‡)

## å¦‚ä½•è®¾ç½®ç²˜æ€§é¡µå°¾

ä¸€ä¸ª CSS æŠ€å·§ï¼Œå¦‚ä½•ä½¿ç”¨ Flexbox å¸ƒå±€å°†ç½‘é¡µçš„é¡µå°¾å§‹ç»ˆæ”¾ç½®åœ¨çª—å£æœ€åº•éƒ¨ã€‚

```html
<body class="Site">
  <header>â€¦</header>
  <main class="Site-content">â€¦</main>
  <footer>â€¦</footer>
</body>
```

```css
.Site {
  display: flex;
  min-height: 100vh;
  flex-direction: column;
}

.Site-content {
  flex: 1;
}
```

ğŸ’¬[Sticky Footer](https://philipwalton.github.io/solved-by-flexbox/demos/sticky-footer/) (åŸæ–‡)

# What's More

## regexper | æ­£åˆ™/å·¥å…·

å°† JS çš„æ­£åˆ™è¡¨è¾¾å¼è½¬æˆå›¾å½¢è§£é‡Šçš„åœ¨çº¿å·¥å…·

ğŸ’¬[åœ°å€](https://regexper.com/)
