# 2020.4

## ES2020 | JavaScript/ES

### ç§æœ‰å˜é‡ Private Class Variables

ç±»çš„ä¸»è¦ä½œç”¨ä¹‹ä¸€æ˜¯å°†æˆ‘ä»¬çš„ä»£ç åŒ…å«åœ¨å¯é‡ç”¨çš„æ¨¡å—ä¸­ã€‚æ‰€ä»¥ä¼šåœ¨è®¸å¤šä¸åŒåœ°æ–¹ä½¿ç”¨åˆ°åŒä¸€ä¸ªç±»ï¼Œè€Œä½ å¯èƒ½ä¸å¸Œæœ›å…¶ä¸­çš„æ‰€æœ‰å†…å®¹åœ¨å…¨å±€èŒƒå›´å†…éƒ½å¯ç”¨ã€‚

ç°åœ¨ï¼Œé€šè¿‡åœ¨å˜é‡æˆ–å‡½æ•°å‰é¢æ·»åŠ ä¸€ä¸ªå“ˆå¸Œç¬¦å·`#`ï¼Œå¯ä»¥å°†å®ƒä»¬è®¾ä¸ºç§æœ‰å±æ€§ï¼Œåªåœ¨ç±»å†…éƒ¨å¯ç”¨ã€‚

```js
class Message {
  #message = "Howdy"

  greet() { console.log(this.#message) }
}

const greeting = new Message()

greeting.greet() // Howdy
console.log(greeting.#message) // Private field '#message' must be declared in an enclosing class
```

### Promise.allSettled

å½“æˆ‘ä»¬å¤„ç†å¤šä¸ª`promise`æ—¶ï¼Œå°¤å…¶æ˜¯å½“å®ƒä»¬ç›¸äº’ä¾èµ–æ—¶ï¼Œè®°å½•æ¯ä¸ªäº‹ä»¶åœ¨è°ƒè¯•ä¸­å‘ç”Ÿçš„é”™è¯¯å¯èƒ½å¾ˆæœ‰ç”¨ã€‚ä½¿ç”¨`Promise.allSettled`ï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„`promise`ï¼Œåœ¨æ‰€æœ‰`promise`å®Œæˆåè¿”å›ä¸€ä¸ªåŒ…å«æ¯ä¸ª`promise`ç»“æœçš„æ•°ç»„ã€‚

```js
const p1 = new Promise((res, rej) => setTimeout(res, 1000));

const p2 = new Promise((res, rej) => setTimeout(rej, 1000));

Promise.allSettled([p1, p2]).then(data => console.log(data));

// [
//   Object { status: "fulfilled", value: undefined},
//   Object { status: "rejected", reason: undefined}
// ]
```

### ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ Nullish Coalescing Operator

ç”±äºJavaScriptæ˜¯åŠ¨æ€ç±»å‹çš„ï¼Œå› æ­¤åœ¨åˆ†é…å˜é‡æ—¶ï¼Œæ‚¨éœ€è¦ç‰¢è®°JavaScriptå¯¹çœŸ/å‡å€¼çš„å¤„ç†ã€‚å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªå¸¦æœ‰æŸäº›å€¼çš„å¯¹è±¡ï¼Œæœ‰æ—¶æˆ‘ä»¬å¸Œæœ›å…è®¸ä½¿ç”¨å‡å€¼ï¼Œä¾‹å¦‚ç©ºå­—ç¬¦ä¸²æˆ–æ•°å­—0ã€‚è€Œè¿™æ—¶è®¾ç½®é»˜è®¤å€¼ä¼šè¦†ç›–æœ‰æ•ˆå€¼çš„å†…å®¹:

```js
let person = {
  profile: {
    name: "",
    age: 0
  }
};

console.log(person.profile.name || "Anonymous"); // Anonymous
console.log(person.profile.age || 18); // 18
```

ä½¿ç”¨åŒé—®å·è¿ç®—ç¬¦`??`å°†å®ç°åœ¨åªæœ‰nullæˆ–æœªå®šä¹‰æ—¶æ‰å…è®¸ä½¿ç”¨é»˜è®¤å€¼ã€‚

```js
console.log(person.profile.name ?? "Anonymous"); // ""
console.log(person.profile.age ?? 18); // 0
```

### å¯é€‰é“¾ Optional Chaining Operator

ä¸ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ç›¸ä¼¼ï¼ŒJavaScriptå¤„ç†å‡å€¼æ—¶å¯èƒ½æ— æ³•å‘æŒ¥æˆ‘ä»¬æƒ³è¦çš„ä½œç”¨ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦çš„æ˜¯æœªå®šä¹‰çš„ï¼Œæˆ‘ä»¬å¯ä»¥è¿”å›ä¸€ä¸ªå€¼ï¼Œä½†æ˜¯å¦‚æœå®ƒçš„è·¯å¾„æ˜¯æœªå®šä¹‰çš„ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ

é€šè¿‡åœ¨ç‚¹ç¬¦å·å‰æ·»åŠ é—®å·ï¼Œæˆ‘ä»¬å¯ä»¥å°†å€¼è·¯å¾„çš„ä»»ä½•éƒ¨åˆ†è®¾ç½®ä¸ºå¯é€‰ï¼Œä»¥ä¾¿æˆ‘ä»¬ä»ç„¶å¯ä»¥ä¸ä¹‹äº¤äº’ã€‚

```js
let person = {};

console.log(person.profile.name ?? "Anonymous"); // Cannot read property 'name' of undefined
console.log(person?.profile?.name ?? "Anonymous"); // Anonymous
console.log(person?.profile?.age ?? 18); // 18
```

### BigInt

JavaScriptå¯ä»¥å¤„ç†çš„æœ€å¤§æ•°å­—æ˜¯2 ^ 53ï¼Œé€šè¿‡MAX_SAFE_INTEGERå¯ä»¥æŸ¥å‡ºè¿™ä¸ªå€¼ï¼š

```js
const max = Number.MAX_SAFE_INTEGER;

console.log(max); // 9007199254740991
```

å¦‚æœè¶…å‡ºè¿™ä¸ªæ•°å€¼åšè¿ç®—ï¼Œäº‹æƒ…ä¼šå˜å¾—æœ‰äº›å¤æ€ªâ€¦

```js
console.log(max + 1); // 9007199254740992
console.log(max + 2); // 9007199254740992
console.log(max + 3); // 9007199254740994
console.log(Math.pow(2, 53) == Math.pow(2, 53) + 1); // true
```

ä½¿ç”¨`BigInt`æ•°æ®ç±»å‹å¯ä»¥è§£å†³æ­¤é—®é¢˜ã€‚é€šè¿‡åœ¨æ•°å­—æœ«å°¾åŠ ä¸Šå­—æ¯`n`ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å¤§æ•°å­—è¿ç®—ã€‚æ³¨æ„æ ‡å‡†æ•°å­—ä¸BigIntæ•°å­—ä¸èƒ½æ··åˆä½¿ç”¨ã€‚

```js
const bigNum = 100000000000000000000000000000n;

console.log(bigNum * 2n); // 200000000000000000000000000000n
```

### åŠ¨æ€å¯¼å…¥ Dynamic Import

åœ¨é¡¹ç›®ä¸­ï¼ŒæŸäº›åŠŸèƒ½å¯èƒ½å¾ˆå°‘ä½¿ç”¨ï¼Œè€Œå¯¼å…¥æ‰€æœ‰ä¾èµ–é¡¹å¯èƒ½åªæ˜¯æµªè´¹èµ„æºã€‚ç°åœ¨å¯ä»¥ä½¿ç”¨`async / await`åœ¨éœ€è¦æ—¶åŠ¨æ€å¯¼å…¥ä¾èµ–é¡¹ã€‚

math.js å¯¼å‡ºæ¨¡å—:

```js
const add = (num1, num2) => num1 + num2;

export { add };
```

åŠ¨æ€å¯¼å…¥:

```js
const doMath = async (num1, num2) => {
  if (num1 && num2) {
    const math = await import('./math.js');
    console.log(math.add(5, 10));
  };
};

doMath(4, 2);
```

ğŸ’¬[What's new in ECMAScript 2020 (ES2020)](https://alligator.io/js/es2020/)
ğŸ’¬[New Features In ES2020 You Should Check](https://medium.com/javascript-in-plain-english/new-features-in-es2020-you-should-check-b4974d9d7edc)
ğŸ’¬[tsç‰ˆæœ¬è¯´æ˜](https://www.typescriptlang.org/docs/handbook/release-notes/overview.html)


## JSON Generator | json/mock/å·¥å…·

ä¸€ä¸ªç”Ÿæˆè™šæ‹Ÿ JSON æ•°æ®çš„åœ¨çº¿å·¥å…·ï¼Œå¯ä»¥æ ¹æ®ç»™å®šçš„æ¨¡å¼ï¼Œè‡ªåŠ¨ç”Ÿæˆ JSON æ•°æ®ã€‚

ğŸ’¬[JSON Generator](https://next.json-generator.com)
